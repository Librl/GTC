<!DOCTYPE html> 
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Guess the Card</title>

<style>
body {
  font-family: system-ui, sans-serif;
  background: white;
  color: black;
  display: flex;
  justify-content: center;
  margin-top: 40px;
}

.container {
  width: 720px;
}

input {
  width: 100%;
  padding: 10px;
  font-size: 16px;
}

button {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  background: #6aaa64;
  color: white;
  font-size: 16px;
  border: none;
  cursor: pointer;
}

.options {
  margin-top: 10px;
  text-align: center;
}

.type-toggle {
  font-weight: bold;
  cursor: pointer;
}

.legend {
  margin-top: 6px;
  cursor: pointer;
  user-select: none;
  font-weight: bold;
}

.legend span {
  display: none;
  font-size: 13px;
  margin-top: 4px;
  color: #333;
  font-weight: normal;
}

.legend.open span {
  display: block;
}

.grid {
  margin-top: 20px;
}

.row {
  display: grid;
  gap: 8px;
  margin-bottom: 8px;
}

.cell {
  padding: 10px;
  text-align: center;
  font-weight: bold;
  border-radius: 4px;
  font-size: 14px;
  color: white;
}

.correct { background: #6aaa64; }
.partial { background: #c9b458; color: black; }
.wrong { background: #a11b1b; }

.message {
  margin-top: 15px;
  text-align: center;
  font-size: 18px;
}
</style>
</head>

<body>
<div class="container">
  <h2 id="modeTitle"></h2>

  <input id="guessInput" list="cardList" placeholder="Type a card name">
  <datalist id="cardList"></datalist>

  <button id="guessBtn">Guess</button>

  <div class="options">
    <label id="typeToggleWrapper" class="type-toggle">
      <input type="checkbox" id="typeToggle">
      Type
    </label>

    <div id="legend" class="legend">
      Type?
      <span>Bonus / Penalty / Neither</span>
    </div>
  </div>

  <div class="grid" id="grid"></div>

  <div class="message" id="message"></div>
  <button id="classicBtn" style="display:none;"></button>
</div>

<script>
// ---------- DATE & DAILY KEY ----------
const todayKey = new Date().toISOString().slice(0,10);
const dailyKey = "dailyCompleted-" + todayKey;

// ---------- COLORS ----------
const suitColors = {
  Army:"#302f2c", Artifact:"#f05907", Beast:"#48a140",
  Building:"#42215e", Flame:"#ba321a", Flood:"#292994",
  Land:"#693123", Leader:"#7a1f8f", Outsider:"#e6c317",
  Undead:"#2a5759", Weapon:"#737a7a", Weather:"#4ca4c2",
  Wild:"#bac7cc", Wizard:"#9b6cff"
};

// ---------- CARD LIST ----------
const cards = [
  {name:"Dwarvish Infantry", suits:["Army"], strength:15, categories:["Penalty"]},
  {name:"Rangers", suits:["Army"], strength:5, categories:["Bonus"]},
  {name:"Light Cavalry", suits:["Army"], strength:17, categories:["Penalty"]},
  {name:"Elven Archers", suits:["Army"], strength:10, categories:["Bonus"]},
  {name:"Knights", suits:["Army"], strength:20, categories:["Penalty"]},

  {name:"Shield of Keth", suits:["Artifact"], strength:4, categories:["Bonus"]},
  {name:"Gem of Order", suits:["Artifact"], strength:5, categories:["Bonus"]},
  {name:"World Tree", suits:["Artifact"], strength:2, categories:["Bonus"]},
  {name:"Protection Rune", suits:["Artifact"], strength:1, categories:["None"]},
  {name:"Book of Changes", suits:["Artifact"], strength:3, categories:["Bonus"]},

  {name:"Phoenix", suits:["Beast","Flame","Weather"], strength:14, categories:["Penalty","Bonus"]},
  {name:"Hydra", suits:["Beast"], strength:12, categories:["Bonus"]},
  {name:"Warhorse", suits:["Beast"], strength:6, categories:["Bonus"]},
  {name:"Unicorn", suits:["Beast"], strength:9, categories:["Bonus"]},
  {name:"Basilisk", suits:["Beast"], strength:35, categories:["Penalty"]},
  {name:"Dragon", suits:["Beast"], strength:30, categories:["None"]},

  {name:"Castle", suits:["Building"], strength:10, categories:["Bonus"]},
  {name:"Crypt", suits:["Building"], strength:21, categories:["Penalty","Bonus"]},
  {name:"Chapel", suits:["Building"], strength:2, categories:["Bonus"]},
  {name:"Dungeon", suits:["Building"], strength:7, categories:["Bonus"]},
  {name:"Bell Tower", suits:["Building"], strength:8, categories:["Bonus"]},

  {name:"Wildfire", suits:["Flame"], strength:40, categories:["Penalty"]},
  {name:"Lightning", suits:["Flame"], strength:11, categories:["Bonus"]},
  {name:"Fire Elemental", suits:["Flame"], strength:4, categories:["Bonus"]},
  {name:"Forge", suits:["Flame"], strength:9, categories:["Bonus"]},
  {name:"Candle", suits:["Flame"], strength:2, categories:["Bonus"]},

  {name:"Swamp", suits:["Flood"], strength:18, categories:["Penalty"]},
  {name:"Island", suits:["Flood"], strength:14, categories:["Bonus"]},
  {name:"Water Elemental", suits:["Flood"], strength:4, categories:["Bonus"]},
  {name:"Fountain of Life", suits:["Flood"], strength:1, categories:["Bonus"]},
  {name:"Great Flood", suits:["Flood"], strength:32, categories:["Penalty"]},

  {name:"Mountain", suits:["Land"], strength:9, categories:["Bonus"]},
  {name:"Forest", suits:["Land"], strength:7, categories:["Bonus"]},
  {name:"Earth Elemental", suits:["Land"], strength:4, categories:["Bonus"]},
  {name:"Cavern", suits:["Land"], strength:6, categories:["Bonus"]},
  {name:"Garden", suits:["Land"], strength:11, categories:["Penalty","Bonus"]},

  {name:"Princess", suits:["Leader"], strength:2, categories:["Bonus"]},
  {name:"Warlord", suits:["Leader"], strength:4, categories:["Bonus"]},
  {name:"Queen", suits:["Leader"], strength:6, categories:["Bonus"]},
  {name:"King", suits:["Leader"], strength:8, categories:["Bonus"]},
  {name:"Empress", suits:["Leader"], strength:15, categories:["Penalty","Bonus"]},

  {name:"Angel", suits:["Outsider"], strength:16, categories:["Bonus"]},
  {name:"Leprechaun", suits:["Outsider"], strength:20, categories:["Bonus"]},
  {name:"Judge", suits:["Outsider"], strength:11, categories:["Bonus"]},
  {name:"Demon", suits:["Outsider"], strength:45, categories:["Penalty"]},

  {name:"Lich", suits:["Undead"], strength:13, categories:["Bonus"]},
  {name:"Dark Queen", suits:["Undead"], strength:10, categories:["Bonus"]},
  {name:"Specter", suits:["Undead"], strength:12, categories:["Bonus"]},
  {name:"Ghoul", suits:["Undead"], strength:8, categories:["Bonus"]},
  {name:"Death Knight", suits:["Undead"], strength:14, categories:["Bonus"]},

  {name:"Elven Longbow", suits:["Weapon"], strength:3, categories:["Bonus"]},
  {name:"War Dirigible", suits:["Weapon"], strength:35, categories:["Penalty"]},
  {name:"Warship", suits:["Weapon"], strength:23, categories:["Penalty"]},
  {name:"Magic Wand", suits:["Weapon"], strength:1, categories:["Bonus"]},
  {name:"Sword of Keth", suits:["Weapon"], strength:7, categories:["Bonus"]},

  {name:"Whirlwind", suits:["Weather"], strength:13, categories:["Bonus"]},
  {name:"Blizzard", suits:["Weather"], strength:30, categories:["Penalty"]},
  {name:"Air Elemental", suits:["Weather"], strength:4, categories:["Bonus"]},
  {name:"Smoke", suits:["Weather"], strength:27, categories:["Penalty"]},
  {name:"Rainstorm", suits:["Weather"], strength:8, categories:["Penalty","Bonus"]},

  {name:"Mirage", suits:["Wild"], strength:0, categories:["Bonus"]},
  {name:"Shapeshifter", suits:["Wild"], strength:0, categories:["Bonus"]},
  {name:"Doppelganger", suits:["Wild"], strength:0, categories:["None"]},

  {name:"Jester", suits:["Wizard"], strength:3, categories:["Bonus"]},
  {name:"Enchantress", suits:["Wizard"], strength:5, categories:["Bonus"]},
  {name:"Collector", suits:["Wizard"], strength:7, categories:["Bonus"]},
  {name:"Beastmaster", suits:["Wizard"], strength:9, categories:["Bonus"]},
  {name:"Necromancer", suits:["Wizard"], strength:3, categories:["Bonus"]},
  {name:"Warlock Lord", suits:["Wizard"], strength:25, categories:["Penalty"]}
];

// ---------- DAILY TARGET ----------
function dailyTarget() {
  let seed = 0;
  for (let i = 0; i < todayKey.length; i++) {
    seed = (seed * 31 + todayKey.charCodeAt(i)) % cards.length;
  }
  return cards[seed];
}

// ---------- DOM ----------
const input = document.getElementById("guessInput");
const grid = document.getElementById("grid");
const message = document.getElementById("message");
const guessBtn = document.getElementById("guessBtn");
const classicBtn = document.getElementById("classicBtn");
const modeTitle = document.getElementById("modeTitle");
const typeToggle = document.getElementById("typeToggle");
const typeToggleWrapper = document.getElementById("typeToggleWrapper");
const legend = document.getElementById("legend");
const datalist = document.getElementById("cardList");

cards.forEach(c => {
  const o = document.createElement("option");
  o.value = c.name;
  datalist.appendChild(o);
});

legend.onclick = () => legend.classList.toggle("open");

let target, guesses = 0;
let isClassic = false;

// ---------- START MODES ----------
function startDaily() {
  isClassic = false;
  reset();
  modeTitle.textContent = "Guess the Card ‚Äî Daily";
  target = dailyTarget();
  typeToggle.checked = true;
  typeToggleWrapper.style.display = "none";
  legend.style.display = "block";
}

function startClassic() {
  isClassic = true;
  reset();
  modeTitle.textContent = "Guess the Card ‚Äî Classic";
  target = cards[Math.floor(Math.random() * cards.length)];
  typeToggle.checked = false;
  typeToggleWrapper.style.display = "inline";
  legend.style.display = "block";
  classicBtn.style.display = "none";
}

// ---------- RESET ----------
function reset() {
  grid.innerHTML = "";
  message.textContent = "";
  guesses = 0;
  guessBtn.disabled = false;
  input.value = "";
}

// ---------- GUESS ----------
function guess() {
  const g = cards.find(c => c.name.toLowerCase() === input.value.toLowerCase());
  if (!g) return;

  guesses++;
  if (isClassic) typeToggleWrapper.style.display = "none";

  const row = document.createElement("div");
  row.className = "row";
  row.style.gridTemplateColumns = typeToggle.checked
    ? "2.6fr 1.3fr 1.6fr 1.6fr"
    : "2.6fr 1.3fr 1.6fr";

  const name = document.createElement("div");
  name.className = "cell";
  name.textContent = `${g.name} (${g.strength})`;
  name.style.background = suitColors[g.suits[0]];

  const suit = document.createElement("div");
  const suitMatch = g.suits.some(s => target.suits.includes(s));
  suit.className = "cell " + (suitMatch ? "correct" : "wrong");
  suit.textContent = suitMatch ? "Suit ‚úîÔ∏è" : "Suit ‚úñÔ∏è";

  row.append(name, suit);

  if (typeToggle.checked) {
    const type = document.createElement("div");
    const match = g.categories.some(c => target.categories.includes(c));
    type.className = "cell " + (match ? "correct" : "wrong");
    type.textContent = match ? "Type ‚úîÔ∏è" : "Type ‚úñÔ∏è";
    row.append(type);
  }

  const str = document.createElement("div");
  if (g.strength === target.strength) {
    str.className = "cell correct";
    str.textContent = "‚úîÔ∏è";
  } else {
    str.className = "cell partial";
    str.textContent = g.strength < target.strength ? "‚¨ÜÔ∏è Strength" : "‚¨áÔ∏è Strength";
  }

  row.append(str);
  grid.appendChild(row);
  input.value = "";

  if (g === target || guesses === 6) {
    guessBtn.disabled = true;

    if (!isClassic) {
      localStorage.setItem(dailyKey, "true"); // Mark daily as played
      message.textContent = g === target
        ? "üéâ You solved today‚Äôs card!"
        : `üíÄ Today‚Äôs card was ${target.name}`;
      classicBtn.textContent = "Try Classic Mode";
    } else {
      message.textContent = g === target
        ? "üéâ You guessed the card!"
        : `üíÄ The card was ${target.name}`;
      classicBtn.textContent = "Try Again";
    }

    classicBtn.style.display = "block";
  }
}

guessBtn.onclick = guess;
input.addEventListener("keydown", e => e.key === "Enter" && guess());
classicBtn.onclick = () => startClassic();

// ---------- INIT DAILY / CLASSIC ----------
if (localStorage.getItem(dailyKey)) {
  // Already played today ‚Üí skip to classic
  startClassic();
} else {
  startDaily();
}
</script>
</body>
</html>
